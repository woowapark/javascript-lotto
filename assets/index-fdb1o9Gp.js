var O=o=>{throw TypeError(o)};var N=(o,t,e)=>t.has(o)||O("Cannot "+e);var a=(o,t,e)=>(N(o,t,"read from private field"),e?e.call(o):t.get(o)),u=(o,t,e)=>t.has(o)?O("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),m=(o,t,e,i)=>(N(o,t,"write to private field"),i?i.call(o,e):t.set(o,e),e),f=(o,t,e)=>(N(o,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();const d={minLength:1,maxLength:45,winningNumbersLength:6,bonusMatchCount:5,lottoBaseTicketPrice:1e3,roundingStandard:100},B={prefix:"[ERROR]",invalidDividedUnit:`구입 금액은 ${d.lottoBaseTicketPrice}원 단위로 나누어 떨어져야 합니다.`},E={ticketEmoji:"🎟️",ticketCount(o){return`총 ${o}개를 구매했습니다.`},totalProfit(o){return`당신의 총 수익률은 ${o}%입니다.`}},R={validate(o){R.validateDividedUnit(o)},isDividedUnit(o){return o%d.lottoBaseTicketPrice===0},validateDividedUnit(o){if(!this.isDividedUnit(o))throw new Error(`${B.prefix} ${B.invalidDividedUnit}`)}};class F{static validatePurchasePrice(t){try{return R.validate(t),!0}catch(e){return alert(e.message),!1}}}function I(o,t){return Math.floor(Math.random()*(t-o+1)+o)}var v,S,A;class W{constructor(t){u(this,S);u(this,v);m(this,v,f(this,S,A).call(this,t))}generateLotto(){const{winningNumbersLength:t,minLength:e,maxLength:i}=d,n=new Set;for(;n.size<t;){const r=I(e,i);n.add(r)}return Array.from(n).sort((r,h)=>r-h)}get generatedLottos(){return a(this,v)}}v=new WeakMap,S=new WeakSet,A=function(t){return Array.from({length:t},()=>this.generateLotto())};const g={three:{price:5e3,number:3},four:{price:5e4,number:4},five:{price:15e5,number:5},fiveBonus:{price:3e7,number:5},six:{price:2e9,number:6}},V="fiveBonus",y={displayTicketCount(o){return E.ticketCount(o)},displayGeneratedLottos(o){const t=document.createElement("ul");return t.setAttribute("id","generated-lotto-contents"),t.setAttribute("class","generated-lotto-contents"),o.forEach(e=>{const i=document.createElement("li");i.textContent=`${E.ticketEmoji} ${e.join(", ")}`,t.appendChild(i)}),t},displayStatistics(o){const t=document.createElement("tbody");return t.setAttribute("id","lotto-statistics-tbody"),Object.keys(o).forEach(i=>{const n=document.createElement("tr"),{number:r,price:h}=g[i],q=i===V?" + 보너스볼":"",j=o[i],P=document.createElement("td"),T=document.createElement("td"),w=document.createElement("td");P.textContent=`${r}개${q}`,T.textContent=`${h.toLocaleString()}원`,w.textContent=`${j}개`,n.appendChild(P),n.appendChild(T),n.appendChild(w),t.appendChild(n)}),t},displayTotalProfit(o){return E.totalProfit(o)}};function s(o){return document.querySelector(o)}function K(o){return document.querySelectorAll(o)}class C{static getTicketCount(t){return t/d.lottoBaseTicketPrice}static generateLottos(t){return new W(t).generatedLottos}static displayGeneratedLottoInfo(t,e){this.displayTicketCount(t),this.displayGeneratedLottos(e)}static displayTicketCount(t){s("#total-ticket-count").textContent=y.displayTicketCount(t)}static displayGeneratedLottos(t){const e=s("#generated-lotto-contents");e&&e.remove(),s("#generated-lotto-container").appendChild(y.displayGeneratedLottos(t))}}const $={validateWinningNumbers(o){this.validateLength(o),this.validateUniqueNumber(o),this.validateWinningNumbersRange(o)},validateBonusNumber(o,t){this.validateRange(t),this.validateUniqueNumber([...o,t])}};class k{static setLottoNumbers(){const t=Array.from(K(".lotto-number-input")).map(i=>Number(i.value)),e=Number(s("#bonus-number-input").value);return{winningNumbers:t,bonusNumber:e}}static validateLottoNumbers(t){try{return $.validateWinningNumbers(t.winningNumbers),$.validateBonusNumber(t.winningNumbers,t.bonusNumber),!0}catch(e){return alert(e.message),!1}}}var l,c,_,x,G,U,D;class z{constructor(t,e){u(this,c);u(this,l);m(this,l,{three:0,four:0,five:0,fiveBonus:0,six:0}),f(this,c,U).call(this,t,e)}getMatchedNumbersLength(t,e){return t.filter(i=>e.includes(i)).length}isEqualBonusNumber(t,e){return e.includes(t)}calculateTotalProfit(t){const i=f(this,c,D).call(this)/(t*d.lottoBaseTicketPrice)*.01;return Math.round(i*d.roundingStandard)/d.roundingStandard}get lottoStatistics(){return a(this,l)}}l=new WeakMap,c=new WeakSet,_=function(t){Object.keys(g).forEach(e=>{g[e].number===t&&a(this,l)[e]++})},x=function(t,e){if(this.isEqualBonusNumber(t,e)){a(this,l).fiveBonus++;return}a(this,l).five++},G=function(t,e){const{winningNumbers:i,bonusNumber:n}=t,r=this.getMatchedNumbersLength(i,e);if(r===d.bonusMatchCount){f(this,c,x).call(this,n,e);return}f(this,c,_).call(this,r)},U=function(t,e){for(let i=0;i<e.length;i++)f(this,c,G).call(this,t,e[i])},D=function(){return Object.keys(g).reduce((e,i)=>e+g[i].price*a(this,l)[i],0)};class H{static calculateAndShowResults(t,e,i){const n=new z(t,e);this.showLottoStatistics(n),this.showTotalProfit(n,i)}static showLottoStatistics(t){const e=t.lottoStatistics,i=s("#lotto-statistics-tbody");i&&i.remove(),s("#lotto-statistics-table").appendChild(y.displayStatistics(e))}static showTotalProfit(t,e){const i=t.calculateTotalProfit(e);s("#profit-text").textContent=y.displayTotalProfit(i)}}function J(){s("#modal-wrapper").classList.remove("hidden-modal"),s("#modal-wrapper").classList.add("modal-wrapper")}function M(){s("#modal-wrapper").classList.add("hidden-modal"),s("#modal-wrapper").classList.remove("modal-wrapper")}var p,L,b;class Q{constructor(){u(this,p);u(this,L);u(this,b);m(this,b,{winningNumbers:null,bonusNumber:null}),this.initEventListeners()}initEventListeners(){this.initSubmitFormEventListeners(),this.initCloseModalEventListeners(),s("#restart-button").addEventListener("click",this.handleRestartButton.bind(this))}initSubmitFormEventListeners(){s("#lotto-purchase-form").addEventListener("submit",this.handleLottoPurchaseSubmit.bind(this)),s("#lotto-numbers-form").addEventListener("submit",this.handleLottoNumbersSubmit.bind(this))}initCloseModalEventListeners(){s("#close-button").addEventListener("click",M),s("#modal-wrapper").addEventListener("click",M)}handleLottoPurchaseSubmit(t){t.preventDefault();const e=s("#lotto-purchase-input").value;F.validatePurchasePrice(e)&&(m(this,p,C.getTicketCount(e)),m(this,L,C.generateLottos(a(this,p))),C.displayGeneratedLottoInfo(a(this,p),a(this,L)),s("#hidden-form").classList.remove("hidden-form"))}handleLottoNumbersSubmit(t){t.preventDefault(),m(this,b,k.setLottoNumbers()),k.validateLottoNumbers(a(this,b))&&(J(),H.calculateAndShowResults(a(this,b),a(this,L),a(this,p)))}handleRestartButton(){location.reload()}}p=new WeakMap,L=new WeakMap,b=new WeakMap;new Q;
